# CONTRIBUTING.md

このプロジェクトへの貢献を歓迎します。コードの品質と一貫性を保つため、以下のガイドラインに従ってください。

## コーディング規約

### 一般

- 可読性を重視し、冗長なコードや複雑なロジックは避けてください。
- 変数名・関数名は意味が分かる英語（必要に応じてローマ字日本語可）で記述してください。
- 命名規則はキャメルケース（例: myVariable）、定数は大文字スネークケース（例: MY_CONSTANT）を推奨します。
- 再利用性・保守性を意識した設計を心がけてください。

### シェルスクリプト

- **コメントスタイル**:
  - ファイルの先頭にスクリプト全体の目的を簡潔に説明するコメントを記述してください。
  - 各主要な処理ブロック（依存コマンドのチェック、エラー対策、認証情報の取得・検証、外部コマンドの実行など）の直前に、その目的や注意点を説明するコメントを記述してください。
  - コメントは `#` で始め、その後にスペースを一つ入れてください。
  - **スクリプトファイルのコメントは日本語で記述してください。**
- **ログ**:
  - **ログ出力は英語で記述してください。**
- インデントはスペース2つまたは4つで統一してください（プロジェクトの既存スタイルに従う）。
- `set -e`, `set -u` などの安全対策は、スクリプトの冒頭で明示的に記述してください。
- 依存コマンドの存在チェックは、スクリプトの冒頭で `command -v` を用いて行い、見つからない場合はエラーメッセージを表示して即時終了してください。
- 各コマンドやセクションの目的を説明するコメントは、その行またはセクションの直前に記述してください。
- 例:
  ```bash
  #!/bin/bash

  # このスクリプトはアプリケーションの依存パッケージをインストールします。

  # --- 依存コマンドの存在チェック ---
  if ! command -v apt-get >/dev/null 2>&1; then
    echo "Error: apt-get command not found. Please use a Debian/Ubuntu environment." >&2
    exit 1
  fi

  # エラー発生時は即時終了
  set -e

  # --- パッケージのインストール ---
  apt-get update -y
  apt-get install -y --no-install-recommends curl ca-certificates

  # --- クリーンアップ ---
  apt-get clean
  rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
  ```

### その他の言語

- 言語ごとの一般的なスタイルガイド（PEP8, Google Style Guide等）に従ってください。
- 必要に応じて、他の言語のコーディング規約をここに追加してください。

### Dockerfile

- 公式のベースイメージを使用し、可能な限り最新の安定版を推奨します。
- イメージサイズを最小限に抑えるため、マルチステージビルドや`.dockerignore`ファイルを活用してください。
- 各ステップの目的や処理内容を明確にするため、**RUN命令の中でも各処理ごとに詳細なコメントを記述してください**。
- RUN命令は可能な限りまとめて記述し、レイヤー数を減らしてください。
- パッケージインストール時は`--no-install-recommends`を付与し、不要なパッケージを避けてください。
- キャッシュや一時ファイルは必ず削除し、イメージを軽量化してください。
- 外部スクリプト（curl | sh等）は信頼できる公式のみ利用し、必要に応じて注意コメントを記載してください。
- 環境変数の設定は`ENV`命令で明示的に行ってください。
- 例:
  ```Dockerfile
  # ベースイメージとして最新の安定版Debianを使用
  FROM debian:bookworm-slim

  # 必要なパッケージをインストールし、不要なキャッシュを削除
  RUN set -eux; \
      # パッケージリストの更新
      apt-get update -y; \
      # 必要なパッケージのインストール
      apt-get install -y --no-install-recommends curl ca-certificates git; \
      # 不要なキャッシュ・一時ファイルを削除
      apt-get clean; \
      rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

  # 環境変数の設定例
  ENV APP_ENV=production
  ```

### JSONファイル

- インデントはスペース2つを使用し、一貫性を保ってください。
- キーは可能な限りアルファベット順にソートしてください。
- コメントは、JSONファイル自体がサポートしていない場合、関連するドキュメントやコード内に記述してください。
- サンプル:
  ```json
  {
    "name": "wanileap",
    "version": "1.0.0"
  }
  ```

## コミットメッセージ

- コミットメッセージは**英語で**記述してください。
- コミットメッセージは簡潔かつ明確に、変更の目的を記述してください。
- 最初の行は50文字以内にまとめ、変更の概要を示してください。
- 必要に応じて、詳細な説明を空行の後に記述してください。
- 例:
  ```
  Fix: correct typo in Dockerfile

  The previous base image name was incorrect. Updated to node:20-alpine.
  ```

## プルリクエスト

- プルリクエストは、一つの論理的な変更に限定してください。
- 変更内容が明確にわかるように、説明を詳細に記述してください。
- 関連するIssueがあれば、参照してください。
- レビューコメントには日本語・英語どちらでも構いません。
