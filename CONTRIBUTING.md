# CONTRIBUTING.md

このプロジェクトへの貢献を歓迎します。コードの品質と一貫性を保つため、以下のガイドラインに従ってください。

## コーディング規約

### 一般

- 可読性を重視し、冗長なコードや複雑なロジックは避けてください。
- 変数名・関数名は意味が分かる英語（必要に応じてローマ字日本語可）で記述してください。
- 命名規則はキャメルケース（例: myVariable）、定数は大文字スネークケース（例: MY_CONSTANT）を推奨します。
- 再利用性・保守性を意識した設計を心がけてください。

### シェルスクリプト

- **コメントスタイル**:
  - ファイルの先頭にスクリプト全体の目的を簡潔に説明するコメントを記述してください。
  - 各主要な処理ブロック（依存コマンドのチェック、エラー対策、認証情報の取得・検証、外部コマンドの実行など）の直前に、その目的や注意点を説明するコメントを記述してください。
  - コメントは `#` で始め、その後にスペースを一つ入れてください。
  - **スクリプトファイルのコメントは日本語で記述してください。**
- **ログ**:
  - **ログ出力は英語で記述してください。**
- インデントはスペース2つまたは4つで統一してください（プロジェクトの既存スタイルに従う）。
- `set -e`, `set -u` などの安全対策は、スクリプトの冒頭で明示的に記述してください。
- 依存コマンドの存在チェックは、スクリプトの冒頭で `command -v` を用いて行い、見つからない場合はエラーメッセージを表示して即時終了してください。
- 各コマンドやセクションの目的を説明するコメントは、その行またはセクションの直前に記述してください。
- 例:
  ```bash
  #!/bin/bash

  # --- 依存コマンドの存在チェック ---
  for cmd in aws gemini docker; do
    if ! command -v "$cmd" >/dev/null 2>&1; then
      echo "Error: $cmd command not found. Please install $cmd." >&2
      exit 1
    fi
  done

  # エラー発生時は即時終了
  set -e

  # --- AWS SSO認証情報の取得と検証 ---
  # AWS SSO 認証情報を取得し、.envファイルに書き出します。
  # 注意: このスクリプトを実行する前に、ホストマシンで 'aws sso login' を実行し、
  #       SSOセッションがアクティブであることを確認してください。
  echo "Retrieving AWS SSO credentials..."
  # ...以下略...
  ```

### その他の言語

- 言語ごとの一般的なスタイルガイド（PEP8, Google Style Guide等）に従ってください。
- 必要に応じて、他の言語のコーディング規約をここに追加してください。

### Dockerfile

- 公式のベースイメージを使用し、可能な限り最新の安定版を推奨します。
- イメージサイズを最小限に抑えるため、マルチステージビルドや`.dockerignore`ファイルを活用してください。
- 各ステップの目的を明確にするため、適切なコメントを追加してください。
- RUN命令は可能な限りまとめて記述し、レイヤー数を減らしてください。
- 例:
  ```Dockerfile
  # ベースイメージ
  FROM node:20-alpine

  # 依存関係のインストール
  RUN apk add --no-cache git
  ```

### JSONファイル

- インデントはスペース2つを使用し、一貫性を保ってください。
- キーは可能な限りアルファベット順にソートしてください。
- コメントは、JSONファイル自体がサポートしていない場合、関連するドキュメントやコード内に記述してください。
- サンプル:
  ```json
  {
    "name": "wanileap",
    "version": "1.0.0"
  }
  ```

## コミットメッセージ

- コミットメッセージは**英語で**記述してください。
- コミットメッセージは簡潔かつ明確に、変更の目的を記述してください。
- 最初の行は50文字以内にまとめ、変更の概要を示してください。
- 必要に応じて、詳細な説明を空行の後に記述してください。
- 例:
  ```
  Fix: correct typo in Dockerfile

  The previous base image name was incorrect. Updated to node:20-alpine.
  ```

## プルリクエスト

- プルリクエストは、一つの論理的な変更に限定してください。
- 変更内容が明確にわかるように、説明を詳細に記述してください。
- 関連するIssueがあれば、参照してください。
- レビューコメントには日本語・英語どちらでも構いません。

ご協力ありがとうございます！
